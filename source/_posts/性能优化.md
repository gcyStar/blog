---
title: optimize
date: 2020-11-20
tags: [es6,javaScript,性能优化]
author: gcyStar
---
>  因为有很多核心页面是h5实现的，包括首屏过后用户看到的第一个页面，所以有个季度，我的okr就是把全站核心h5的p90 load时间要小于3s内。为了达成目标，分阶段采取了很多措施。蛮有趣的一件事，总结下来就是下面我画的一张图。


![optimize.png](/images/optimize.png)
###### 过程
因为页面业务逻辑比较复杂，第一阶段从代码逻辑下手，和产品确认下线了部分ab实验逻辑。 推动后端一些做页面模块的同步拆分，划分成两部分首屏和非首屏部分。添加svg骨架屏，提升极端情况下用户的体验。添加离线宝的功能。还有图片懒加载，压缩等等一些常规措施，第一阶段后差不多就达到3秒了。 第二阶段主要是和客户端联调，接入了x5内核，webview缓存，以及桥接缓存一些方面的优化。第二波优化好后差不多就2s左右了。
###### 注解

* p90是指性能指标最后10%用户平均指数

###### 总结
虽然okr达成了，但是优化是一件长期的事情，平时需求评审的时候就应该减少，或者架构的时候架构好ab实验的部分。技术测细节方面不断优化沉淀出机制，推广并应用。



 
 
 
 
 
 
 
 
 
 
 